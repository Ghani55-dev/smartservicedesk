{% extends 'core/base.html' %}
{% block content %}
<h2 class="text-xl font-bold mb-4">Tickets</h2>
{% if messages %}
  <div class="mb-4">
    {% for message in messages %}
      <div class="bg-green-100 border border-green-400 text-green-800 px-4 py-2 rounded mb-2">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<table class="min-w-full bg-white shadow rounded">
    <thead>
        <tr class="bg-gray-200 text-left">
            <th class="p-2">Title</th>
            <th class="p-2">Priority</th>
            <th class="p-2">Status</th>
            <th class="p-2">Assigned To</th>
        </tr>
    </thead>
    <tbody>
        {% for ticket in tickets %}
        <tr class="border-t">
            <td class="p-2"> <a href="{% url 'ticket_detail' ticket.id %}" class="text-blue-600 underline">{{ ticket.title }}</a></td>
            <td class="p-2">{{ ticket.priority }}</td>
            <td class="p-2">{{ ticket.status }}</td>
            <td class="p-2">
                {% if ticket.assigned_to %}
                {{ ticket.assigned_to.username }}
                {% else %}
                Unassigned
                {% endif %}
            </td>
            
        </tr>
        {% empty %}
        <tr><td class="p-2" colspan="4">No tickets found.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
